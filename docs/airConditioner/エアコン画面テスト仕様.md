# エアコン画面テスト仕様書

## 概要
エアコン制御画面の機能および表示が仕様通りに実装されていることを確認するためのテスト仕様書です。
Android/iOS共通のテスト項目として定義し、自動テストと手動テストに分類して記載します。

## テスト対象画面
- エアコン画面（初期表示）
- エアコン画面（リクエスト中）
- エアコン画面（完了）

---

# 第1章 自動テスト項目

自動テスト（単体テスト・UI自動テスト）で実施可能な項目を記載します。

## 1.1 画面構成要素の存在確認

### 1.1.1 初期表示画面
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-001 | ヘッダー要素存在確認 | ヘッダー部に戻るボタン、タイトル「エアコン」、ヘルプボタンが存在する | 3つの要素すべてが表示される |
| AT-002 | 説明テキスト存在確認 | 「下記の設定でエアコンを起動します。よろしいですか？」のテキストが存在する | 指定テキストが表示される |
| AT-003 | 設定表示エリア存在確認 | 「エアコンの設定」ヘッダーと「変更する」リンクが存在する | ヘッダーとリンクが表示される |
| AT-004 | 起動時間表示存在確認 | 「起動時間」ラベルと「10分間」の値が存在する | ラベルと値が表示される |
| AT-005 | 起動ボタン存在確認 | 「この設定で起動する」ボタンが存在する | ボタンが表示される |

### 1.1.2 リクエスト中画面
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-006 | ヘッダー要素存在確認 | ヘッダー部に戻るボタンとタイトル「エアコン」が存在し、ヘルプボタンが非表示 | 戻るボタンとタイトルのみ表示 |
| AT-007 | ステータステキスト存在確認 | 「リクエスト中」テキストが存在する | 指定テキストが表示される |
| AT-008 | ローディング要素存在確認 | ローディングインジケーターが存在する | インジケーターが表示される |
| AT-009 | 設定表示存在確認 | 「この設定で動作中」テキストと起動時間「-- --」が存在する | テキストと値が表示される |
| AT-010 | 停止ボタン存在確認 | 「停止する」ボタンが存在し、無効状態である | ボタンが無効状態で表示される |
| AT-011 | 通知設定エリア存在確認 | 通知設定ヘッダー、説明テキスト、設定ボタンが存在する | 通知設定エリアのすべての要素が表示される |

### 1.1.3 完了画面
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-012 | ヘッダー要素存在確認 | ヘッダー部に戻るボタン、タイトル「エアコン」、ヘルプボタンが存在する | 3つの要素すべてが表示される |
| AT-013 | ステータステキスト存在確認 | 「エアコン停止まで」テキストが存在する | 指定テキストが表示される |
| AT-014 | 残り時間表示存在確認 | 残り時間（例：「9分」）が大きなフォントで表示される | 残り時間が表示される |
| AT-015 | 設定表示存在確認 | 「この設定で動作中」テキストと起動時間「10分間」が存在する | テキストと値が表示される |
| AT-016 | 停止ボタン存在確認 | 「停止する」ボタンが存在し、有効状態である | ボタンが有効状態で表示される |
| AT-017 | 通知設定エリア存在確認 | 通知設定ヘッダー、説明テキスト、設定ボタンが存在する | 通知設定エリアのすべての要素が表示される |

## 1.2 状態遷移テスト

### 1.2.1 画面遷移
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-018 | 初期表示→リクエスト中遷移 | 「この設定で起動する」ボタンタップ時の画面遷移 | リクエスト中画面に遷移する |
| AT-019 | リクエスト中→完了自動遷移 | リクエスト中画面からの自動遷移（3-5秒後） | 完了画面に自動遷移する |
| AT-020 | 完了→初期表示遷移 | 「停止する」ボタンタップ時の画面遷移 | 初期表示画面に遷移する |
| AT-021 | 戻るボタン遷移 | 各画面での戻るボタンタップ時の動作 | ホーム画面に遷移する |

### 1.2.2 ボタン状態
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-022 | リクエスト中停止ボタン無効化 | リクエスト中画面での停止ボタンの状態 | ボタンが無効化されタップできない |
| AT-023 | 完了画面停止ボタン有効化 | 完了画面での停止ボタンの状態 | ボタンが有効化されタップできる |

## 1.3 データバインディングテスト

### 1.3.1 設定値表示
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-024 | 初期表示起動時間表示 | 初期表示画面での起動時間値の表示 | 「10分間」が表示される |
| AT-025 | リクエスト中起動時間表示 | リクエスト中画面での起動時間値の表示 | 「-- --」が表示される |
| AT-026 | 完了画面起動時間表示 | 完了画面での起動時間値の表示 | 「10分間」が表示される |

### 1.3.2 時間更新
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-027 | 残り時間初期値 | 完了画面遷移時の残り時間初期値 | 「9分」が表示される |
| AT-028 | 残り時間減算処理 | 1分経過後の残り時間更新 | 残り時間が1分減る |

## 1.4 アニメーション動作テスト

### 1.4.1 ローディングアニメーション
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-029 | ローディング回転動作 | リクエスト中画面でのローディング要素の回転 | 連続回転アニメーションが動作する |
| AT-030 | ローディング表示時間 | ローディングアニメーションの表示時間 | 3-5秒間表示される |

### 1.4.2 画面遷移アニメーション
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-031 | プッシュ遷移アニメーション | 画面遷移時のアニメーション実行 | 0.3秒のプッシュアニメーションが実行される |

## 1.5 エラーハンドリングテスト

### 1.5.1 ネットワークエラー
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-032 | ネットワークエラー処理 | ネットワーク切断時のエラーハンドリング | エラーダイアログ表示後、初期表示画面に戻る |
| AT-033 | タイムアウト処理 | 30秒タイムアウト時の処理 | エラーダイアログ表示 |
| AT-034 | サーバーエラー処理 | サーバーエラー発生時の処理 | エラーメッセージ表示後、初期表示画面に戻る |

## 1.6 自動停止機能テスト

### 1.6.1 タイマー機能
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| AT-035 | 残り時間0での自動遷移 | 残り時間が0分になった時の動作 | 初期表示画面に自動遷移する |

---

# 第2章 手動テスト項目

手動で実施する必要があるテスト項目を記載します。主に視覚的な確認やユーザビリティに関する項目です。

## 2.1 視覚デザイン確認

### 2.1.1 カラーテーマ確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-001 | 背景色確認 | 画面背景色がダークネイビー（#1a1a2e）である | 指定色で表示される |
| MT-002 | アクセントカラー確認 | ボタンや強調要素が赤色（#ff4444）である | 指定色で表示される |
| MT-003 | テキストカラー確認 | プライマリテキストが白色、セカンダリテキストがグレーである | 指定色で表示される |
| MT-004 | 境界線色確認 | 区切り線が薄いグレー（#333333）である | 指定色で表示される |

### 2.1.2 フォントサイズ・スタイル確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-005 | 大見出しフォント確認 | 残り時間表示が64sp/pt、太字である | 指定サイズ・スタイルで表示される |
| MT-006 | 中見出しフォント確認 | 起動時間値が32sp/pt、太字である | 指定サイズ・スタイルで表示される |
| MT-007 | 小見出しフォント確認 | ヘッダータイトルが18sp/pt、太字である | 指定サイズ・スタイルで表示される |
| MT-008 | 本文フォント確認 | ボタンテキストが16sp/pt、通常または太字である | 指定サイズ・スタイルで表示される |
| MT-009 | キャプションフォント確認 | ラベルテキストが14sp/pt、通常である | 指定サイズ・スタイルで表示される |

### 2.1.3 レイアウト・マージン確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-010 | ヘッダー高さ確認 | ヘッダー部の高さが64dp/ptである | 指定高さで表示される |
| MT-011 | ボタン高さ確認 | アクションボタンの高さが48dp/ptである | 指定高さで表示される |
| MT-012 | マージン確認 | 要素間のマージンが仕様通りである | 指定マージンで配置される |
| MT-013 | 角丸確認 | ボタンの角丸が8dp/pt、通知エリアの角丸が16dp/ptである | 指定角丸で表示される |

## 2.2 レスポンシブ対応確認

### 2.2.1 画面サイズ対応
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-014 | 最小幅対応確認 | 320dp/pt幅での表示確認 | レイアウトが崩れない |
| MT-015 | 最大幅対応確認 | 768dp/pt幅での表示確認 | レイアウトが適切に調整される |
| MT-016 | マージン調整確認 | 画面幅に応じたマージン調整（16-32dp/pt） | 画面幅に応じて適切に調整される |

## 2.3 アクセシビリティ確認

### 2.3.1 コントラスト比確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-017 | テキストコントラスト確認 | すべてのテキストのコントラスト比がWCAG AA準拠（4.5:1以上） | 基準を満たしている |

### 2.3.2 音声読み上げ確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-018 | ボタン読み上げ確認 | すべてのボタンが適切に読み上げられる | 意味のある音声で読み上げられる |
| MT-019 | テキスト読み上げ確認 | すべてのテキストが適切に読み上げられる | 内容が理解できる音声で読み上げられる |

### 2.3.3 キーボードナビゲーション確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-020 | フォーカス表示確認 | フォーカス状態が視覚的に確認できる | フォーカス状態が明確に表示される |
| MT-021 | タブ順序確認 | 論理的な順序でフォーカス移動する | 適切な順序でフォーカスが移動する |

## 2.4 プラットフォーム固有実装確認

### 2.4.1 Android固有実装
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 | プラットフォーム |
|-------------|-------------|----------|----------|------------------|
| MT-022 | ステータスバー色確認 | ステータスバーがダークネイビーに設定される | 指定色で表示される | Android固有 |
| MT-023 | ナビゲーションバー色確認 | ナビゲーションバーが背景色に合わせて設定される | 背景色と統一される | Android固有 |
| MT-024 | システム戻るボタン確認 | システムの戻るボタンでホーム画面に戻る | ホーム画面に遷移する | Android固有 |

### 2.4.2 iOS固有実装
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 | プラットフォーム |
|-------------|-------------|----------|----------|------------------|
| MT-025 | セーフエリア対応確認 | ノッチ・ホームインジケーター領域を避けて表示される | 重要な要素が隠れない | iOS固有 |
| MT-026 | ステータスバースタイル確認 | ステータスバーがライトコンテンツスタイルに設定される | 白色のステータスバー表示 | iOS固有 |
| MT-027 | スワイプ戻りジェスチャー確認 | 画面端からのスワイプで戻る動作 | ホーム画面に遷移する | iOS固有 |

## 2.5 ユーザビリティ確認

### 2.5.1 操作性確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-028 | ボタンタップ反応確認 | ボタンタップから反応まで100ms以内 | 即座に反応する |
| MT-029 | 画面遷移速度確認 | 画面遷移が300ms以内で完了 | スムーズに遷移する |
| MT-030 | ローディング中操作制限確認 | リクエスト中画面でのユーザー操作制限 | 不要な操作ができない |

### 2.5.2 視覚的フィードバック確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-031 | ボタンタップアニメーション確認 | ボタンタップ時のスケールアニメーション（0.1秒） | 視覚的フィードバックがある |
| MT-032 | 状態変化フィードバック確認 | 状態変化時の適切な視覚的フィードバック | 状態変化が分かりやすい |

## 2.6 パフォーマンス確認

### 2.6.1 リソース使用量確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-033 | メモリ使用量確認 | アプリのメモリ使用量が50MB以内 | 基準値以内に収まる |
| MT-034 | CPU使用率確認 | アニメーション実行時のCPU使用率 | 過度な負荷がかからない |

## 2.7 バックグラウンド動作確認

### 2.7.1 アプリライフサイクル確認
| テスト項目ID | テスト項目名 | 検証内容 | 期待結果 |
|-------------|-------------|----------|----------|
| MT-035 | バックグラウンド移行確認 | アプリをバックグラウンドに移行した際の状態保持 | 適切な状態で復帰する |
| MT-036 | フォアグラウンド復帰確認 | フォアグラウンド復帰時のタイマー同期 | 正確な残り時間が表示される |

---

# 第3章 テスト実行環境・条件

## 3.1 テスト実行環境

### 3.1.1 必要な環境
- **テストデバイス**: 実機またはエミュレーター/シミュレーター
- **ネットワーク環境**: インターネット接続可能な環境
- **テストアカウント**: 動作確認用のユーザーアカウント

### 3.1.2 対象OS/デバイス
- **Android**: Android 7.0 (API level 24) 以上
- **iOS**: iOS 13.0 以上
- **画面サイズ**: 320dp/pt ～ 768dp/pt対応

## 3.2 テスト実行条件

### 3.2.1 前提条件
- アプリが正常にインストールされている
- 必要な権限が付与されている
- ホーム画面が正常に表示される

### 3.2.2 テストデータ
- **起動時間設定**: 10分間（固定値）
- **エアコン制御API**: モック又は開発環境

## 3.3 テスト完了基準

### 3.3.1 自動テスト
- すべての自動テスト項目（AT-001～AT-035）が成功する
- テストカバレッジが80%以上である

### 3.3.2 手動テスト
- すべての手動テスト項目（MT-001～MT-036）で期待結果が確認できる
- 致命的なバグが0件である
- 軽微なバグが許容範囲内である

---

# 第4章 テスト実行時の注意事項

## 4.1 共通注意事項
1. **テスト環境の統一**: 同一条件でのテスト実行を心がける
2. **エビデンス取得**: 重要な動作はスクリーンショットまたは画面録画で記録
3. **再現性確認**: バグが発見された場合は再現手順を明確にする
4. **プラットフォーム差異**: Android/iOS固有項目は該当プラットフォームでのみ実施

## 4.2 自動テスト実行時の注意事項
1. **テストデータの準備**: テスト実行前に必要なデータを準備する
2. **モック設定**: 外部APIとの通信をモック化して安定したテストを実行
3. **並行実行制御**: 状態を持つテストは順次実行し、競合状態を避ける

## 4.3 手動テスト実行時の注意事項
1. **デバイス固有確認**: 複数デバイスでの動作確認を推奨
2. **アクセシビリティツール使用**: 音声読み上げ機能やコントラスト測定ツールを活用
3. **パフォーマンス測定**: 専用ツールを使用して客観的な数値で評価

---

この仕様書により、エアコン画面が設計通りに実装され、Android/iOS両プラットフォームで一貫したユーザー体験を提供できることを確認できます。
