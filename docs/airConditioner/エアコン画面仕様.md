# エアコン画面仕様書

## 概要
トヨタ ハリアー ハイブリッド車のスマートフォン向けエアコン制御画面UIの詳細仕様

## 画面状態遷移
エアコン画面は以下の3つの状態を持ち、順次遷移します：

1. **初期表示** (エアコン画面_初期表示) → ユーザーがエアコン設定を確認・調整する画面
2. **リクエスト中** (エアコン画面_リクエスト中) → 「この設定で起動する」ボタン押下後の処理中画面
3. **完了** (エアコン画面_完了) → エアコン起動完了後の制御画面

## 画面別詳細仕様

### 1. 初期表示画面 (エアコン画面_初期表示)

#### 1.1 ヘッダー部分
**位置**: 画面最上部
**高さ**: 約60px
**背景色**: ダークグレー (#2C2C2E)

- **左側**: 戻るボタン（"<"アイコン、白色）
- **中央**: 「エアコン」タイトル（白色、フォントサイズ18px、太字）
- **右側**: ヘルプボタン（"?"アイコン、白色）

#### 1.2 設定確認メッセージエリア
**位置**: ヘッダー下
**高さ**: 約100px
**背景**: ダークグレー

- **メインテキスト**: 「下記の設定でエアコンを起動します。」（白色、フォントサイズ16px）
- **サブテキスト**: 「よろしいですか？」（白色、フォントサイズ16px）

#### 1.3 設定表示エリア
**位置**: メッセージエリア下
**高さ**: 約120px

##### 1.3.1 設定タイトル
- **テキスト**: 「エアコンの設定」（白色、フォントサイズ18px、太字）
- **右側**: 「変更する」リンク（赤色、フォントサイズ14px）

##### 1.3.2 起動時間表示
**背景**: セパレーターライン付き
- **ラベル**: 「起動時間」（薄いグレー、フォントサイズ14px）
- **数値**: 「10」（白色、フォントサイズ36px、極太）
- **単位**: 「分間」（薄いグレー、フォントサイズ18px）

#### 1.4 実行ボタンエリア
**位置**: 画面下部
**高さ**: 約80px

- **ボタン**: 「この設定で起動する」
- **サイズ**: 幅90%、高さ50px
- **背景色**: 赤色 (#FF3B30)
- **テキスト色**: 白色
- **フォントサイズ**: 16px、太字
- **角丸**: 8px

### 2. リクエスト中画面 (エアコン画面_リクエスト中)

#### 2.1 ヘッダー部分
- 初期表示と同様のヘッダー構成

#### 2.2 ステータス表示エリア
**位置**: 画面中央上部
**高さ**: 約150px

##### 2.2.1 ステータステキスト
- **メインテキスト**: 「リクエスト中」（白色、フォントサイズ18px）

##### 2.2.2 ローディングアニメーション
- **位置**: ステータステキスト下
- **アニメーション**: 回転する花形アイコン（赤色）
- **サイズ**: 60x60px

#### 2.3 動作中設定表示エリア
**位置**: ローディング下
**高さ**: 約120px

- **タイトル**: 「この設定で動作中」（白色、フォントサイズ16px）
- **起動時間表示**: 
  - ラベル: 「起動時間」（薄いグレー、フォントサイズ14px）
  - 数値: 「—」（白色、フォントサイズ24px）※設定値非表示

#### 2.4 停止ボタンエリア
**位置**: 画面下部

- **ボタン**: 「停止する」
- **サイズ**: 幅70%、高さ50px
- **背景色**: ダークグレー (#3C3C3E)
- **テキスト色**: 白色
- **フォントサイズ**: 16px
- **角丸**: 8px

#### 2.5 通知設定エリア
**位置**: 停止ボタン下
**高さ**: 約100px
**背景色**: 少し明るいダークグレー (#1C1C1E)

- **タイトル**: 「通知設定」（白色、フォントサイズ16px、太字）
- **説明文**: 「クルマの操作関連通知をONにすると、リモート操作完了時にお知らせします。」（薄いグレー、フォントサイズ12px）
- **設定ボタン**: 
  - アイコン: 歯車マーク
  - テキスト: 「アプリの通知を設定する」（白色、フォントサイズ14px）

### 3. 完了画面 (エアコン画面_完了)

#### 3.1 ヘッダー部分
- 初期表示と同様のヘッダー構成

#### 3.2 完了ステータスエリア
**位置**: 画面中央上部
**高さ**: 約150px

##### 3.2.1 完了表示
- **メインテキスト**: 「エアコン停止まで」（白色、フォントサイズ16px）
- **カウントダウン**: 「9」（白色、フォントサイズ72px、極太）
- **単位**: 「分」（白色、フォントサイズ24px）

#### 3.3 動作中設定表示エリア
**位置**: カウントダウン下
**高さ**: 約120px

- **タイトル**: 「この設定で動作中」（白色、フォントサイズ16px）
- **起動時間表示**:
  - ラベル: 「起動時間」（薄いグレー、フォントサイズ14px）
  - 数値: 「10」（白色、フォントサイズ24px）
  - 単位: 「分間」（薄いグレー、フォントサイズ16px）

#### 3.4 停止ボタンエリア
**位置**: 画面中央下

- **ボタン**: 「停止する」
- **サイズ**: 幅70%、高さ50px
- **背景色**: 赤色 (#FF3B30)
- **テキスト色**: 白色
- **フォントサイズ**: 16px
- **角丸**: 8px

#### 3.5 通知設定エリア
- リクエスト中画面と同様の構成

## 画面遷移仕様

### 遷移パターン
1. **ホーム画面 → 初期表示**: エアコンボタンタップでプッシュ遷移
2. **初期表示 → リクエスト中**: 「この設定で起動する」ボタンタップ
3. **リクエスト中 → 完了**: 3秒後に自動遷移
4. **完了 → 初期表示**: 「停止する」ボタンタップ
5. **任意画面 → ホーム画面**: 戻るボタンタップでポップ遷移

### アニメーション
- **プッシュ遷移**: 右からスライドイン（0.3秒）
- **ポップ遷移**: 左へスライドアウト（0.3秒）
- **状態変更**: フェードイン/アウト（0.5秒）

## カラーパレット

| 要素 | カラーコード | 用途 |
|------|-------------|------|
| 背景色 | #000000 | メイン背景 |
| ダークグレー | #2C2C2E | ヘッダー、カード背景 |
| ライトグレー | #3C3C3E | ボタン背景（非アクティブ） |
| 通知背景 | #1C1C1E | 通知設定エリア背景 |
| 白色 | #FFFFFF | メインテキスト |
| 薄いグレー | #8E8E93 | サブテキスト、ラベル |
| 赤色 | #FF3B30 | アクションボタン、リンク |

## フォント仕様

| 要素 | フォントサイズ | 太さ |
|------|---------------|------|
| ヘッダータイトル | 18px | Bold |
| メインテキスト | 16px | Regular |
| カウントダウン数値（大） | 72px | Heavy |
| 時間数値（中） | 36px | Heavy |
| 時間数値（小） | 24px | Regular |
| ボタンテキスト | 16px | Bold |
| ラベル | 14px | Regular |
| 説明文 | 12px | Regular |

## インタラクション仕様

### タップ可能要素
1. 戻るボタン
2. ヘルプボタン
3. 「変更する」リンク
4. 「この設定で起動する」ボタン
5. 「停止する」ボタン
6. 「アプリの通知を設定する」ボタン

### フィードバック
- **タップ時**: 軽い振動フィードバック（UIImpactFeedbackGenerator.light）
- **ボタン押下時**: 背景色の明度変更（0.2秒）
- **状態遷移時**: フェードアニメーション

## ローディング・アニメーション仕様

### リクエスト中ローディング
- **形状**: 花形（8つの花びら）
- **色**: 赤色 (#FF3B30)
- **アニメーション**: 360度回転（2秒/1回転）
- **サイズ**: 60x60px

### カウントダウン
- **更新間隔**: 1秒毎
- **アニメーション**: 数字変更時に軽いフェード効果

## エラーハンドリング

### 通信エラー時
- アラート表示: 「通信エラーが発生しました。しばらく時間をおいて再度お試しください。」
- 初期表示画面に戻る

### タイムアウト時
- リクエスト中画面で30秒後にタイムアウト
- エラーメッセージ表示後、初期表示に戻る

## アクセシビリティ

### VoiceOver対応
- 全ボタンに適切なアクセシビリティラベル設定
- カウントダウンの音声読み上げ対応
- 状態変更時のアナウンス

### Dynamic Type対応
- システムフォントサイズ設定に応じてテキスト拡大/縮小
- レイアウト調整対応

---

**作成日**: 2024年12月19日  
**バージョン**: 1.0  
**最終更新**: 2024年12月19日
