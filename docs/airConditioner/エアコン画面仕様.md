# エアコン画面仕様書

## 概要
トヨタ車両管理アプリケーションのエアコン画面仕様書です。Android、iOS共通で利用できる仕様として記載しています。

## 画面遷移
- **遷移元**: ホーム画面のエアコンボタン（ファンアイコン）をタップ
- **遷移方法**: プッシュ遷移（スライドイン）
- **戻る方法**: ナビゲーションバーの戻るボタンまたはスワイプジェスチャー

## 状態管理
エアコン画面は以下の3つの状態を持ち、記載の順番で画面表示を切り替えます。

1. **初期表示** → エアコン画面_初期表示
2. **リクエスト中** → 初期表示で「この設定で起動する」ボタンをタップした時の表示
3. **完了** → リクエスト中を数秒間表示した後の表示

## 画面構成

### 共通要素

#### 1. ナビゲーションバー
**位置**: 画面最上部
**高さ**: 44pt (iOS) / 56dp (Android)
**背景色**: ダークグレー (#1C1C1E)
**内容**:
- 左側: 戻るボタン（左向き矢印アイコン）
- 中央: 画面タイトル「エアコン」
- 右側: なし
- フォントサイズ: 17pt/17sp
- 色: 白色 (#FFFFFF)

#### 2. メインコンテンツエリア
**位置**: ナビゲーションバーの下
**高さ**: 残り画面全体
**背景色**: ダークグレー (#1C1C1E)
**パディング**: 左右 16pt/16dp

---

## 状態別画面仕様

### 状態1: 初期表示（エアコン画面_初期表示）

#### 1. エアコン設定パネル
**位置**: 画面上部（ナビゲーションバーの下）
**高さ**: 280pt/280dp
**背景色**: ダークグレー (#1C1C1E)
**レイアウト**: 縦配置

##### 1.1 温度設定
**位置**: 上部
**高さ**: 80pt/80dp
**レイアウト**: 水平配置
- **左側**: 温度表示「25°C」
  - フォントサイズ: 48pt/48sp
  - 色: 白色 (#FFFFFF)
  - フォントウェイト: ボールド
- **右側**: 温度調整ボタン
  - 上ボタン: 温度上昇アイコン（+）
  - 下ボタン: 温度下降アイコン（-）
  - ボタンサイズ: 44pt/44dp × 44pt/44dp
  - 色: 白色 (#FFFFFF)

##### 1.2 風量設定
**位置**: 中央
**高さ**: 60pt/60dp
**レイアウト**: 水平配置
- **左側**: ラベル「風量」
  - フォントサイズ: 16pt/16sp
  - 色: 白色 (#FFFFFF)
- **右側**: 風量レベル表示「3」
  - フォントサイズ: 24pt/24sp
  - 色: 白色 (#FFFFFF)
  - フォントウェイト: ボールド

##### 1.3 風向設定
**位置**: 中央下
**高さ**: 60pt/60dp
**レイアウト**: 水平配置
- **左側**: ラベル「風向」
  - フォントサイズ: 16pt/16sp
  - 色: 白色 (#FFFFFF)
- **右側**: 風向表示「正面」
  - フォントサイズ: 16pt/16sp
  - 色: 白色 (#FFFFFF)

##### 1.4 モード設定
**位置**: 下部
**高さ**: 80pt/80dp
**レイアウト**: 水平配置
- **左側**: ラベル「モード」
  - フォントサイズ: 16pt/16sp
  - 色: 白色 (#FFFFFF)
- **右側**: モード表示「冷房」
  - フォントサイズ: 16pt/16sp
  - 色: 白色 (#FFFFFF)

#### 2. 操作ボタンエリア
**位置**: エアコン設定パネルの下
**高さ**: 120pt/120dp
**レイアウト**: 縦配置

##### 2.1 メイン操作ボタン
**位置**: 上部
**高さ**: 48pt/48dp
**幅**: 画面幅 - 32pt/32dp
**背景色**: 赤色 (#FF0000)
**内容**: 「この設定で起動する」
**フォントサイズ**: 18pt/18sp
**色**: 白色 (#FFFFFF)
**フォントウェイト**: ボールド
**角丸**: 8pt/8dp

##### 2.2 補助ボタン
**位置**: 下部
**高さ**: 48pt/48dp
**幅**: 画面幅 - 32pt/32dp
**背景色**: 透明
**ボーダー**: 1pt/1dp、白色 (#FFFFFF)
**内容**: 「設定を保存」
**フォントサイズ**: 16pt/16sp
**色**: 白色 (#FFFFFF)
**角丸**: 8pt/8dp

---

### 状態2: リクエスト中（エアコン画面_リクエスト中）

#### 1. ローディング表示エリア
**位置**: 画面中央
**高さ**: 200pt/200dp
**レイアウト**: 縦配置、中央揃え

##### 1.1 ローディングアイコン
**位置**: 上部
**サイズ**: 80pt/80dp × 80pt/80dp
**内容**: 回転するファンアイコン
**色**: 白色 (#FFFFFF)
**アニメーション**: 時計回りに回転（2秒で1回転）

##### 1.2 ステータスメッセージ
**位置**: 中央
**内容**: 「エアコンを起動しています...」
**フォントサイズ**: 18pt/18sp
**色**: 白色 (#FFFFFF)
**フォントウェイト**: ボールド

##### 1.3 補足メッセージ
**位置**: 下部
**内容**: 「しばらくお待ちください」
**フォントサイズ**: 14pt/14sp
**色**: グレー (#999999)

#### 2. キャンセルボタン
**位置**: 画面下部
**高さ**: 48pt/48dp
**幅**: 画面幅 - 32pt/32dp
**背景色**: 透明
**ボーダー**: 1pt/1dp、白色 (#FFFFFF)
**内容**: 「キャンセル」
**フォントサイズ**: 16pt/16sp
**色**: 白色 (#FFFFFF)
**角丸**: 8pt/8dp

---

### 状態3: 完了（エアコン画面_完了）

#### 1. 成功表示エリア
**位置**: 画面中央
**高さ**: 200pt/200dp
**レイアウト**: 縦配置、中央揃え

##### 1.1 成功アイコン
**位置**: 上部
**サイズ**: 80pt/80dp × 80pt/80dp
**内容**: チェックマークアイコン
**色**: 緑色 (#00FF00)
**アニメーション**: フェードイン（0.5秒）

##### 1.2 成功メッセージ
**位置**: 中央
**内容**: 「エアコンが起動しました」
**フォントサイズ**: 18pt/18sp
**色**: 白色 (#FFFFFF)
**フォントウェイト**: ボールド

##### 1.3 現在の設定表示
**位置**: 下部
**内容**: 「温度: 25°C / 風量: 3 / 風向: 正面」
**フォントサイズ**: 14pt/14sp
**色**: グレー (#999999)

#### 2. 操作ボタンエリア
**位置**: 画面下部
**高さ**: 120pt/120dp
**レイアウト**: 縦配置

##### 2.1 停止ボタン
**位置**: 上部
**高さ**: 48pt/48dp
**幅**: 画面幅 - 32pt/32dp
**背景色**: 赤色 (#FF0000)
**内容**: 「停止する」
**フォントサイズ**: 18pt/18sp
**色**: 白色 (#FFFFFF)
**フォントウェイト**: ボールド
**角丸**: 8pt/8dp

##### 2.2 設定変更ボタン
**位置**: 下部
**高さ**: 48pt/48dp
**幅**: 画面幅 - 32pt/32dp
**背景色**: 透明
**ボーダー**: 1pt/1dp、白色 (#FFFFFF)
**内容**: 「設定を変更」
**フォントサイズ**: 16pt/16sp
**色**: 白色 (#FFFFFF)
**角丸**: 8pt/8dp

---

## 状態遷移仕様

### 遷移フロー
1. **初期表示** → **リクエスト中**: 「この設定で起動する」ボタンタップ
2. **リクエスト中** → **完了**: 3秒後に自動遷移
3. **完了** → **初期表示**: 「停止する」ボタンタップ
4. **リクエスト中** → **初期表示**: 「キャンセル」ボタンタップ
5. **完了** → **初期表示**: 「設定を変更」ボタンタップ

### アニメーション仕様

#### 画面遷移アニメーション
- **遷移時間**: 0.3秒
- **イージング**: ease-in-out
- **方向**: 右から左へスライド

#### 状態遷移アニメーション
- **初期表示 → リクエスト中**: フェードアウト（0.2秒）→ フェードイン（0.2秒）
- **リクエスト中 → 完了**: フェードアウト（0.2秒）→ フェードイン（0.2秒）
- **完了 → 初期表示**: フェードアウト（0.2秒）→ フェードイン（0.2秒）

#### ローディングアニメーション
- **回転速度**: 2秒で1回転
- **イージング**: linear
- **継続時間**: リクエスト中状態の間

#### 成功アイコンアニメーション
- **フェードイン時間**: 0.5秒
- **イージング**: ease-out
- **スケール**: 0.8 → 1.0

---

## ユーザーインタラクション仕様

### タップ可能要素

#### 初期表示状態
1. **温度上昇ボタン**: 温度を1°C上げる
2. **温度下降ボタン**: 温度を1°C下げる
3. **この設定で起動するボタン**: リクエスト中状態へ遷移
4. **設定を保存ボタン**: 現在の設定を保存
5. **戻るボタン**: ホーム画面へ戻る

#### リクエスト中状態
1. **キャンセルボタン**: 初期表示状態へ戻る
2. **戻るボタン**: ホーム画面へ戻る（確認ダイアログ表示）

#### 完了状態
1. **停止するボタン**: エアコン停止 → 初期表示状態へ戻る
2. **設定を変更ボタン**: 初期表示状態へ戻る
3. **戻るボタン**: ホーム画面へ戻る

### ジェスチャー対応
- **スワイプ戻る**: 右から左へスワイプでホーム画面へ戻る
- **プルトゥリフレッシュ**: 対応なし

### フィードバック
- **ボタンタップ**: ハプティックフィードバック（iOS）、振動フィードバック（Android）
- **状態変更**: 視覚的フィードバック（色変化、アニメーション）

---

## カラーパレット
- **背景色**: ダークグレー (#1C1C1E)
- **テキスト色**: 白色 (#FFFFFF)
- **アクセント色**: 赤色 (#FF0000)
- **成功色**: 緑色 (#00FF00)
- **補助テキスト色**: グレー (#999999)
- **ボーダー色**: 白色 (#FFFFFF)

## フォント仕様
- **画面タイトル**: 17pt/17sp、ボールド
- **メインボタン**: 18pt/18sp、ボールド
- **サブボタン**: 16pt/16sp、レギュラー
- **温度表示**: 48pt/48sp、ボールド
- **ラベル**: 16pt/16sp、レギュラー
- **値表示**: 24pt/24sp、ボールド
- **補助テキスト**: 14pt/14sp、レギュラー

---

## アクセシビリティ対応

### スクリーンリーダー対応
- すべてのボタンに適切なアクセシビリティラベルを設定
- 温度、風量、風向の数値の読み上げ対応
- 状態変更時の音声フィードバック

### 視覚的アクセシビリティ
- 十分なコントラスト比（4.5:1以上）を確保
- タップターゲットサイズ（44pt/44dp以上）を維持
- 色だけでなくアイコンでも情報を伝達

---

## レスポンシブ対応

### 画面サイズ対応
- **最小幅**: 320pt/320dp
- **最大幅**: 414pt/414dp
- **縦横比の維持**: 16:9推奨

### デバイス固有対応
- **iOS固有**: セーフエリア対応、ホームインジケーター対応
- **Android固有**: ナビゲーションバー対応、ステータスバー対応

---

## プラットフォーム固有実装

### iOS固有
- **セーフエリア**: ノッチ、ホームインジケーターの考慮
- **ナビゲーションバー**: 標準のUINavigationBarスタイル
- **ハプティックフィードバック**: UIImpactFeedbackGenerator使用
- **スワイプ戻る**: UIScreenEdgePanGestureRecognizer使用

### Android固有
- **ナビゲーションバー**: Material Design 3のAppBar使用
- **ステータスバー**: システムUIの考慮
- **振動フィードバック**: VibrationEffect使用
- **スワイプ戻る**: システムの戻るジェスチャー対応

---

## エラーハンドリング

### ネットワークエラー
- **接続失敗**: 「接続に失敗しました。再度お試しください。」メッセージ表示
- **タイムアウト**: 「処理がタイムアウトしました。」メッセージ表示
- **リトライ機能**: エラー時にリトライボタンを表示

### 車両通信エラー
- **車両未接続**: 「車両との通信ができません。」メッセージ表示
- **エアコン故障**: 「エアコンに異常があります。」メッセージ表示

---

## 注意事項
- **ダークテーマ専用**: ライトテーマは非対応
- **車両連携**: 実際の車両データに基づく動的表示
- **ネットワーク依存**: リモート操作にはネットワーク接続が必要
- **バッテリー考慮**: 車両のバッテリー残量が低い場合の警告表示
- **温度範囲**: 16°C〜32°Cの範囲で制限
- **風量レベル**: 1〜5の範囲で制限
